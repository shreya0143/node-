<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Recipes - Gourmet Recipes</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
    <%- include('navbar.ejs') %>

        <div class="container">
            <h1>
                <%= (typeof isFavoritesPage !=='undefined' && isFavoritesPage) ? 'My Favorites' : 'My Recipes' %>
            </h1>

            <% if ((typeof isFavoritesPage==='undefined' || !isFavoritesPage)) { %>
                <a href="/create-recipe" class="btn btn-primary" style="margin-bottom: 2rem;">+ Add New Recipe</a>
                <% } %>

                    <div class="recipe-grid">
                        <% if (recipes.length> 0) { %>
                            <% recipes.forEach(recipe=> { %>
                                <div class="recipe-card">
                                    <img src="<%= recipe.image %>" alt="<%= recipe.title %>"
                                        onerror="this.src='https://via.placeholder.com/300?text=No+Image'">
                                    <div class="content">
                                        <h3><a href="/recipes/<%= recipe._id %>">
                                                <%= recipe.title %>
                                            </a></h3>
                                        <div class="meta">
                                            <span>üïí <%= recipe.cookingTime %></span>
                                            <span>üë®‚Äçüç≥ <%= recipe.difficulty %></span>
                                        </div>
                                        <div class="actions"
                                            style="margin-top: 15px; display: flex; gap: 10px; align-items: center;">
                                            <% if (typeof isFavoritesPage !=='undefined' && isFavoritesPage) { %>
                                                <form action="/recipes/<%= recipe._id %>/favorite" method="POST">
                                                    <button type="submit" class="btn-heart favorited">‚ù§Ô∏è</button>
                                                </form>
                                                <% } else { %>
                                                    <a href="/recipes/edit/<%= recipe._id %>"
                                                        class="btn btn-outline btn-sm">Edit</a>
                                                    <form action="/recipes/delete/<%= recipe._id %>" method="POST"
                                                        style="display:inline;"
                                                        onsubmit="return confirm('Are you sure you want to delete this recipe?');">
                                                        <button type="submit"
                                                            class="btn btn-danger btn-sm">Delete</button>
                                                    </form>
                                                    <% } %>
                                        </div>
                                    </div>
                                </div>
                    </div>
                    <% }) %>
                        <% } else { %>
                            <p>
                                <%= (typeof isFavoritesPage !=='undefined' && isFavoritesPage)
                                    ? "You haven't favored any recipes yet." : "You haven't posted any recipes yet." %>
                            </p>
                            <% } %>
        </div>
        </div>
</body>

</html>